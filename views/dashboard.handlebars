<h2>{{user.firstname}}'s Dashboard</h2>

<section>
    <div class="form-container">

        <div class="grid-container">
            <div>
                <h4>Submit Your Ride</h4>
            </div>
            <div>
                <form class="route-form" enctype="multipart/form-data">
                    
                    <div>  {{!-- Route Selector Dropdown --}}
                        <div class="form-label">
                            <label for="route-name">CHOOSE THE ROUTE </label>
                            <img class="question-mark" src="images/question-mark.svg" alt="Question Mark"
                                title="Please select the route you rode.">
                        </div>

                        <select required name="route-name" id="route_id">
                            <option value="" disabled selected>Routes...</option>
                            {{#each routes.routes as |routes|}}
                            <option value="{{routes.id}}">{{routes.name}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <div>  {{!-- Strava Ride Selector Dropdown --}}
                        <div class="form-label">
                            <label for="strava-ride-name">CHOOSE YOUR STRAVA RIDE </label>
                            <img class="question-mark" src="images/question-mark.svg" alt="Question Mark"
                                title="Please select your Strava ride.">
                        </div>

                        <select required name="strava-ride-name" id="ride_link">
                            <option value="" disabled selected>Strava Rides...</option>
                            {{#each user.activities as |activities|}}
                            <option data-ride-time="{{activities.elapsed_time}}" 
                            data-ride-date="{{activities.start_date_local}}" 
                            value="{{activities.id}}" >

                            {{activities.name}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <div> {{!-- Upload Photo Section  --}}
                        <div class="error">
                            <label for="photo">UPLOAD PHOTO</label>
                            <span class="size-error inactive">Image must be &#60 12mb</span>
                            <span class="type-error inactive">Must be .jpg .png .webp</span>
                            <img class="question-mark" src="images/question-mark.svg" alt="Question Mark"
                                title="Submit a photo for a chance to win the photo contest!">
                        </div>
                        <input type="file" id="photo" name="photo" placeholder="Submit Ride Photo"
                            accept=".jpg, .jpeg, .png, .webp">
                    </div>

                    <div class="center">
                        <button type="submit">SUBMIT RIDE</button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</section>
<hr>
{{!-- MODALS Partial --}}
{{> dashboard-modal modals}}

{{!-- User Completed Routes Section --}}
<section>
    {{#if userRoutes.userRoutes }}
    <h2>Completed Routes</h2>

    {{#each userRoutes.userRoutes as |userRoutes|}}
    <article class="bike-route">

        <div class="bike-route-title">
            <h4 class="bike-route-title">{{userRoutes.route.name}}</h4>
        </div>

        <div class="bike-route-col1">
            <div class="bike-route-table">
                <table>
                    <tr>
                        <td>Date Completed</td>
                        <td>{{format_month_day userRoutes.date_completed}}</td>
                    </tr>
                    <tr>
                        <td>Ride Time</td>
                        <td>{{format_time userRoutes.ride_time}}</td>
                    </tr>
                    <tr>
                        <td>Points Earned</td>
                        <td>{{userRoutes.route.points}}</td>
                    </tr>
                    <tr>
                        <td>Bonus Points</td>
                        <td>{{userRoutes.bonus_points}}</td>
                    </tr>
                    <tr>
                        <td>Approved</td>
                        <td>
                            {{#if userRoutes.approved }}
                            Yes
                            {{else}}
                            No
                            {{/if}}
                        </td>
                    </tr>
                    <tr>
                        <td>Photo</td>
                        <td><a href="https://redwoodadventurecycling.com/photos/2023/{{userRoutes.photo}}">View
                                Photo</a></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="bike-route-map-completed">
            {{#if userRoutes.photo}}
            <img class="route-map" src="/photos/2023/{{userRoutes.photo}}" alt="Photo from {{userRoutes.route.name}}" />
            {{else}}
            <img class="route-map" src="https://ridewithgps.com/routes/full/{{userRoutes.route.id}}.png"
                alt="Map of {{userRoutes.route.name}}" />
            {{/if}}
        </div>
    </article>
    {{/each}}
    {{/if}}

</section>

<script src="/javascript/modal.js"></script>
<script src="/javascript/routesubmit.js"></script>